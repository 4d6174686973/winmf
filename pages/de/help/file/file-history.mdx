# File history

File history ermöglicht es eine Historie der ausgeführten Operationen in einem Ordner zu speichern und zu verwalten. Dazu stehen verschiedene Modi und die Verwaltung von Shortcuts zur Verfügung. Das Menü dient hauptsächlich dem Zweck der Seriennmessung und Edit-Operationen aller Art und stellt zudem eine Vorwärts/Rückwärts Funktion zur Verfügung, so dass komplexe Edit-Operationen komfortabel durchgeführt werden können.

10 Setups können per Shortcut (F1-F10) direkt benutzt werden. Für das Auslösen per Funktionstaste ist es erforderlich, dass der Fensterfokus im file_history Fenster steht (durch Klicken in das Fenster). Die Funktionen können auch durch Klicken mit der Maus auf die Buttons ausgelöst werden.

In der History Liste sammeln sich die Operationen chronologisch und durchnummeriert, das oberste Element ist das Neueste.

![file_history](/file_history.jpg)

## History Setup

Der  ``Mode`` der File History definiert die Funktionsklasse, die einen Eintrag in der History auslöst:
- ``all actions``: alle Menüs erzeugen einen Eintrag
- ``measurement``: nur Messungen bewirken einen Eintrag
- ``overlay only``: es wird nur die overlay Funktion verwendet, d.h. die als visible markierten files in der history werden als zusätzliche Kanäle in der Ausgabe angehängt. Anwendungen davon: Zusätzlich zu einer Messung werden weitere Kanäle angezeigt oder zusätzlich zu einem geladenen File werden die als visible markierten files geladen und angezeigt.
- ``save operation only``: nur speichern löst einen Eintrag aus
- ``shortcuts``: nur shortcuts aus der File History lösen einen Eintrag aus

``Basename``: ist der Basisname für die in der File History gespeicherten files, die automatisch inkrementell benannt werden (Basename_#nnnnnn, mit nnnnnn eine fortlaufende Zahl)

``Basepath`` ist der Pfad unter dem die files gespeichert werden. Es ist die Einstellung für das Pfadverhalten unter [Files/Preferences](/de/help/file/preferences) zu beachten.

Die Anzeigoptionen sind:
- ``Hold``: es werden alle neuen Einträge als visible markiert, so dass das Verhalten einer Hold-Funktion entspricht, die außerdem die zusätzlich als visible markierten files anzeigt.
- ``Only last file visible``:nur der neueste Eintrag wird als visible markiert, alle anderen werden als nicht-visible gesetzt. Dieses Verhalten enstpricht einer reinen Serienerfassung von Daten: Es wird nur das Neueste angezeigt, alle vorherigen werden durchnummeriert gespeichert
- ``Use filename as legend``: kopiert den Filenamen in die Legende
- ``Keep display settings``: verwendet immer das aktuelle Display setting, so dass beim Umschalten der als visible markierten files die Anzeige unverändert bleibt, ansonsten wird immer das Display setting des neuesten files verwendet.

## Shortcut Menus

Der Bereich  ``Shortcut menus`` kann per Kontextmenü für jede Funktion F1-F10 konfiguriert werden:

die obersten 3 Einträge sind je nach Menü verfügbar und erlauben z.B. den direkten Zugriff auf ein Untermenü. Bei Messungen wird hier je nach Menü die Referenzmessung ausgelöst.

``Select``: Auswahl des Menu-setups im File Browser

``Edit``: öffnet das Menü, erlaubt Editieren und alle weiteren Funktionen. Sollen die Änderungen gespeichert werden, so muss im Menü per File/Save das Setup gespeichert werden.

Es können weitere Optionen konfiguriert werden (checked oder unchecked):
- ``Open only``: das Menü wird beim Auslösen durch den Button oder die Funktionstaste nur geöffnet
- ``Save menu by OK``: das Menu wird nach Benutzung aktualisiert gespeichert. Das macht im Zusammenspiel mit Open only Sinn, da sich das Menu dann automatisch den letzten Stand merkt.
- ``Override file saving``: wenn diese Option angewählt ist, wird kein Listeneintrag erzeugt, z.B. wenn man hier eine Mikrofonkalibrierung auslöst und nicht möchte, dass damit ein Eintrag in der File History erzeugt wird.
- ``Default color red``: färbt den Button im Startzustand rot (nach dem Laden eines File history setups). Eine Ausführung von Referenzmessungen im Kontextmenü färbt den Button grün.
- ``Green after exec.``: färbt nach der ersten Ausführung den Button grün, um z.B. Kalibrierprozesse zu unterstützen

Die Buttons  ``Back`` und ``Forw.``, ``Back+del`` verschieben den zuletzt als visible markierten Eintrag nach oben (Forw.) oder nach unten (Back). Back+del löscht den letzten Eintrag zusätzlich. Das entspricht einer Undo Funktion mit löschen. Auf diese Weise kann man bei komplexen Edit Operationen zurückgehen, bei Bedarf letzte Schritte löschen und die Operation an anderer Stelle wieder aufnehmen.

## History List

Die ``History List`` stellt weitere Funktionen zur Verfügung. Die Spalte Name zeigt den Filenamen an. Es ist möglich den Namen direkt in der Liste zu editieren. Der Filename auf der Festplatte wird dadurch direkt umbenannt. So hat man eine schnelle Möglichkeit Files nach Messreihen mit individuellen Namen zu versehen.

Die Checkbox  ``visible`` schaltet ein oder mehrere Files visible (klassische Overlay Funktion, die auf Files im Dateisystem arbeitet).

Die Spalte Last action zeigt den Namen des auslösenden Menüs an.

Path zeigt den Pfad des jeweiligen Files an. Es können auch Files aus verschiedenen Pfaden in der Liste versammelt werden, um komplexe Szenarien abzubilden.

Das Kontextmenu der History Liste erlaubt diverse Edit Operationen in der Liste:
- ``Delete entry``: Selektierte Einträge aus der Liste werden gelöscht. Korrespondierende Files auf der Festplatte werden nicht gelöscht.
- ``Reset table``: reset the list, corresponding files are not deleted from the harddisk.
- ``Delete entry+file``: ein oder mehrere selektierte Einträge aus der Liste werden gelöscht. Files auf der Festplatte werden simultan gelöscht!
- ``Make visible``: aktiviert für die selektierten Einträge die Option visible
- ``Make invisible``: deaktiviert für die selektierten Einträge die Option visible
- ``Insert files``: öffnet den Filebrowser um weitere Files an der selektierten Position aus beliebigen Pfaden hinzuzufügen.
- ``Append files``: öffnet den Filebrowser um weitere Files an das Ende der Liste aus beliebigen Pfaden hinzuzufügen.
- ``Cleanup table``: löscht Einträge aus der Liste, die physikalisch nicht auf der Festplatte unter dem angegebenen Pfad zu finden sind.

![file_history_table_context_menu](/file_history_table_context_menu.jpg)